var jack_socket=function(){var e=new WebSocket("ws://127.0.0.1:4080");e.onopen=function(){console.log("连接到服务器")},e.onmessage=function(e){var n=JSON.parse(e.data);switch(console.log("received a json data :"+n),n.type){case Const.RETURN.TYPE.BACK:ReturnBackService.handle(n);break;case Const.RETURN.TYPE.BROADCAST:BroadcastService.handle(n);break;case Const.RETURN.TYPE.TRANSMIT:TransmitService.handle(n);break;default:console.log(e.data)}},e.onerror=function(e){console.log("error: "+e)},e.onclose=function(){var n={type:"user",data:{action:"close",userId:User.getUserId()}};e.send(JSON.stringify(n)),console.log("closing...")};var n=function(n,o){e.send(JSON.stringify(n),function(e){console.log(e),o()})};return{sendMessage:n}}();