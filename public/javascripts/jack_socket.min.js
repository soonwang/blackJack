var jack_socket=function(){var e=new WebSocket("ws://127.0.0.1:4080");e.onopen=function(){console.log("连接到服务器")},e.onmessage=function(e){var o=JSON.parse(e.data);switch(console.log("received a json data :"+o),o.type){case Const.RETURN.TYPE.BACK:ReturnBackService.handle(o);break;case Const.RETURN.TYPE.BROADCAST:BroadcastService.handle(o);break;case Const.RETURN.TYPE.TRANSMIT:TransmitService.handle(o);break;default:console.log(e.data)}},e.onerror=function(e){console.log("error: "+e)},e.onclose=function(){console.log("closing...")};var o=function(o,n){e.send(JSON.stringify(o),function(e){console.log(e),n()})};return{sendMessage:o}}();