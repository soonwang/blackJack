function hit(){getNewCard("player2"),checkIfBust("player2")&&(document.getElementById("bulletin").innerHTML="你爆了 (You BUST!)",document.getElementById("hit").disabled=!0,document.getElementById("stand").disabled=!0,winner="player1"),showScore()}function stand(){for(hasStood=!0,document.getElementById("hit").disabled=!0,document.getElementById("stand").disabled=!0,table.rows[0].cells[1].innerHTML='<img src="\\images\\resource\\'+cards1[0]+'.jpg" />';calcResult("player1")<17;)getNewCard("player1"),checkIfBust("player1")&&(document.getElementById("bulletin").innerHTML="电脑爆了 (Computer BUST!)",document.getElementById("hit").disabled=!0,document.getElementById("stand").disabled=!0,winner="player2");if(""==winner){var e=calcResult("player1"),a=calcResult("player2");e==a?document.getElementById("bulletin").innerHTML="平局 (PUSH!)":e>a?document.getElementById("bulletin").innerHTML="你输了 (You LOSE)":a>e&&(document.getElementById("bulletin").innerHTML="你赢了 (You WIN!)")}showScore()}function getNewCard(e){var a=cards[counter++];if("player1"==e){var r=cards1.length;cards1[r]=a,table.rows[0].cells[r+1].innerHTML='<img src="\\images\\resource\\'+cards1[r]+'.jpg" />'}else if("player2"==e){var r=cards2.length;cards2[r]=a,table.rows[1].cells[r+1].innerHTML='<img src="\\images\\resource\\'+cards2[r]+'.jpg" />'}return a}function checkIfBust(e){var a=0;if("player1"==e){for(var r=0;r<cards1.length;r++){var d=parseInt(cards1[r].substr(cards1[r].length-2),"10");d>10&&(d=10),a+=d}return a>21}if("player2"==e){for(var r=0;r<cards2.length;r++){var d=parseInt(cards2[r].substr(cards2[r].length-2),"10");d>10&&(d=10),a+=d}return a>21}}function calcResult(e){var a=0,r=0;if("player1"==e){for(var d=0;d<cards1.length;d++){var t=parseInt(cards1[d].substr(cards1[d].length-2),"10");t>10?t=10:1==t&&r++,a+=t}for(var d=0;r>d&&21>=a+10;d++)a+=10}else{for(var d=0;d<cards2.length;d++){var t=parseInt(cards2[d].substr(cards2[d].length-2),"10");t>10?t=10:1==t&&r++,a+=t}for(var d=0;r>d&&21>=a+10;d++)a+=10}return a}function showScore(){var e=calcResult("player1"),a=calcResult("player2");document.getElementById("score").innerHTML="[Computer : You = "+(1==hasStood?e:"?")+" : "+a+"]"}function restart(){document.getElementById("hit").disabled=!1,document.getElementById("stand").disabled=!1,counter=0,winner="",hasStood=!1,cards=["club01","club02","club03","club04","club05","club06","club07","club08","club09","club10","club11","club12","club13","diamond01","diamond02","diamond03","diamond04","diamond05","diamond06","diamond07","diamond08","diamond09","diamond10","diamond11","diamond12","diamond13","heart01","heart02","heart03","heart04","heart05","heart06","heart07","heart08","heart09","heart10","heart11","heart12","heart13","spade01","spade02","spade03","spade04","spade05","spade06","spade07","spade08","spade09","spade10","spade11","spade12","spade13"];for(var e=0;1e3>e;e++)rand=getRand(1,52),tmp=cards[0],cards[0]=cards[rand],cards[rand]=tmp;cards1=[getNewCard(),getNewCard()],cards2=[getNewCard(),getNewCard()],table.rows[0].cells[1].innerHTML='<img src="\\images\\resource\\cardback.png" />',table.rows[0].cells[2].innerHTML='<img src="\\images\\resource\\'+cards1[1]+'.jpg" />',table.rows[1].cells[1].innerHTML='<img src="\\images\\resource\\'+cards2[0]+'.jpg" />',table.rows[1].cells[2].innerHTML='<img src="\\images\\resource\\'+cards2[1]+'.jpg" />';for(var e=3;e<table.rows[0].cells.length;e++)table.rows[0].cells[e].innerHTML="",table.rows[1].cells[e].innerHTML="";showScore(),document.getElementById("bulletin").innerHTML="请做出选择 (Please make a choice.)"}for(var counter=0,winner="",hasStood=!1,cards=["club01","club02","club03","club04","club05","club06","club07","club08","club09","club10","club11","club12","club13","diamond01","diamond02","diamond03","diamond04","diamond05","diamond06","diamond07","diamond08","diamond09","diamond10","diamond11","diamond12","diamond13","heart01","heart02","heart03","heart04","heart05","heart06","heart07","heart08","heart09","heart10","heart11","heart12","heart13","spade01","spade02","spade03","spade04","spade05","spade06","spade07","spade08","spade09","spade10","spade11","spade12","spade13"],getRand=function(e,a){return Math.floor(Math.random()*(a-e))+e},rand,tmp,i=0;1e3>i;i++)rand=getRand(1,52),tmp=cards[0],cards[0]=cards[rand],cards[rand]=tmp;var cards1=[getNewCard(),getNewCard()],cards2=[getNewCard(),getNewCard()],table=document.getElementById("tableboard");table.rows[0].cells[1].innerHTML='<img src="\\images\\resource\\cardback.png" />',table.rows[0].cells[2].innerHTML='<img src="\\images\\resource\\'+cards1[1]+'.jpg" />',table.rows[1].cells[1].innerHTML='<img src="\\images\\resource\\'+cards2[0]+'.jpg" />',table.rows[1].cells[2].innerHTML='<img src="\\images\\resource\\'+cards2[1]+'.jpg" />',showScore();